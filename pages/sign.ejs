<!DOCTYPE html>
<html>
    <head>
        <meta char++set="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="icon" type="image/png" href="/Svgs/sub3.png">
        <link rel="stylesheet" href="/sign.css">
        <link rel="stylesheet" href="/shared.css">
        <title>cFleet  Sign in | Sign up</title>
    </head>

    <body>

        <section id="sign">
            <section id="wel">
         <img alt="logo" src="/Svgs/sub3.png">
         <p id="header">cFleet.<br>Route Optimization at your fingertips.<br><br>..Sign Up.. </p>
            </section>

         <form method="post" action="/register" id="form">
             <div><span><img src="/Svgs/avatarsvg.png" alt="icon"></span><input type="text" name="fullname" placeholder="fullname" required><label>Fullname</label></div>

             <div>
                <span><img src="/Svgs/email.png" alt="icon"></span><input type="text" name="email" placeholder="email" required><label>Email</label>
            </div>  
             
             <div>
                <span><img src="/Svgs/password.png" alt="icon"></span><input id="pw" type="password" name="password" placeholder="Create password" pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\w).{8,}" title="Password must be atlaest 8 characters long, include atleast one; uppercase,lowercase, and special character." required><label>create password</label>
                <section class="clear"><img src="/Svgs/clear.png" alt="icon"></section>
                <section class="visibility"><img class="eye" src="/Svgs/visible.png" alt="icon"></section>
            </div>

             <div>
                <span><img src="/Svgs/password.png" alt="icon"></span><input id="cpw" type="password" name="cpassword" placeholder="Confirm password" required><label>confirm password</label>
                <section class="clear"><img src="/Svgs/clear.png" alt="icon"></section>
                <section class="visibility"><img class="eye" src="/Svgs/visible.png" alt="icon"></section>
            </div>



             <input type="submit" name="signup" class="submit" value="Sign Up">

             <!-- ADDING EJS -->
             <% if (error) { %>
                <p style="color: #ef4444;" id="flashMessage"><%= error %></p>
              <% } %>
              
              <% if (success) { %>
                <p style="color: green;" id="flashMessage"><%= success %></p>
              <% } %>
              
                   
             <p>Already have an account?<a id="signin" href="/login"> Sign in</a></p>

         </form>



         


        </section>
  
        <!-- SHARED -->
        <section id="loader">
             <div>
                <img alt="loader" src="/Svgs/sub3.png">
             </div>
        </section>

        <!-- <section id="success">
            <p>Registration Successful</p>
        </section> -->
        <!-- END OF SHARED -->

        <script>
            // Auto-hide messages after 4 seconds with a fade-out animation
            const flashMsg = document.getElementById("flashMessage");
            if (flashMsg) {
              setTimeout(() => {
                flashMsg.style.transition = "opacity 0.6s ease";
                flashMsg.style.opacity = "0";
                setTimeout(() => flashMsg.remove(), 600); // remove after fade-out
              }, 3000);
            }
          </script>
        <script>
  // Prevent form re-submission when refreshing the page
  if (window.history.replaceState) {
    window.history.replaceState(null, null, window.location.href);
  }

  
</script>

        <script src="./sign.js"></script>
        <script src="./shared.js"></script>
    </body>
</html>